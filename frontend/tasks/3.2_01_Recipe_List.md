# Recipe List Screen Implementation - TODO

**Requirements**: Section 3.2, Step 1 from requirements.md

---

## 📋 Implementation Checklist

### ✅ Core Requirements
- [ ] **Recipe Data Fetching**
  - API integration with `GET /recipes?category&search`
  - Use existing apiService for real/mock data routing
  - Support for category and search query parameters
  - Handle pagination for infinite scroll

- [ ] **Recipe Card Component**
  - Display recipe title, thumbnail image, category badge
  - Show favorite status (heart icon)
  - Optimized for FlatList performance
  - Touch feedback and navigation to detail screen

- [ ] **Search Functionality**
  - Search bar with placeholder and clear button
  - Debounced search input (300ms delay)
  - Search by title, description, and ingredients
  - Clear search results and return to full list

- [ ] **Category Filtering**
  - Horizontal scrollable category filter chips
  - Visual selection state for active category
  - "All" option to show all recipes
  - Combine with search functionality

- [ ] **Pull-to-Refresh**
  - Native RefreshControl implementation
  - Refresh recipe data from API/mock
  - Loading indicator during refresh
  - Error handling for failed refresh

- [ ] **Infinite Scroll**
  - Load more recipes as user scrolls to bottom
  - Loading indicator for additional content
  - Handle end of data gracefully
  - Optimize performance with pagination

- [ ] **Floating Action Button (FAB)**
  - Positioned bottom-right for adding new recipe
  - Navigate to recipe creation screen
  - Orange theme color with white plus icon
  - Proper touch target and accessibility

### 🎨 Design Requirements

- [ ] **Dark Theme Implementation**
  - Consistent with existing orange theme (#FF6B35)
  - Dark background colors (#121212, #1E1E1E)
  - High contrast text colors (#FFFFFF, #B3B3B3)
  - Orange accents for interactive elements

- [ ] **Recipe Card Design**
  - Card layout with rounded corners and shadows
  - Recipe image with 16:9 aspect ratio
  - Category badge with colored background
  - Favorite heart icon (filled/outline based on status)
  - Title and description text with proper hierarchy

- [ ] **Search Bar Design**
  - Search icon and clear button
  - Rounded input field with border
  - Placeholder text: "Search recipes..."
  - Keyboard dismiss on scroll

- [ ] **Category Filter Design**
  - Horizontal scrollable chip list
  - Active state with orange background
  - Inactive state with border outline
  - Smooth scroll behavior

- [ ] **Empty States**
  - No recipes found illustration
  - Search with no results message
  - First-time user onboarding
  - Clear call-to-action buttons

- [ ] **Responsive Layout**
  - Works on phones and tablets
  - Safe area handling for notched devices
  - Keyboard-aware scrolling
  - Proper spacing and touch targets ≥ 44px

### 🔧 Technical Implementation

- [ ] **Dependencies**
  - React Native FlatList for optimized list rendering
  - React Native Reanimated for smooth animations
  - Use existing components (Button, TextInput, etc.)
  - Image optimization with expo-image

- [ ] **API Integration**
  - Use existing apiService.getRecipes() method
  - Support query parameters: { category?, search? }
  - Handle loading, success, and error states
  - Cache management for performance

- [ ] **Performance Optimization**
  - FlatList with getItemLayout for known item heights
  - removeClippedSubviews for large lists
  - Image lazy loading and caching
  - Memoized components with React.memo

- [ ] **Custom Hooks**
  - useRecipes hook for data fetching and state
  - useDebounce hook for search input
  - useInfiniteScroll for pagination
  - usePullToRefresh for refresh functionality

- [ ] **Navigation Integration**
  - Navigate to recipe detail with recipe ID parameter
  - Navigate to recipe creation screen
  - Handle back navigation properly
  - Deep linking support for shared recipes

- [ ] **Anonymous Mode Support**
  - Works seamlessly with mock data when anonymous
  - All features available in demo mode
  - No API calls in anonymous mode
  - Demo banner awareness

### 📁 File Structure

```
src/
├── components/
│   ├── RecipeCard/
│   │   ├── RecipeCard.tsx (new)
│   │   └── index.ts (new)
│   ├── SearchBar/
│   │   ├── SearchBar.tsx (new)
│   │   └── index.ts (new)
│   ├── CategoryFilter/
│   │   ├── CategoryFilter.tsx (new)
│   │   └── index.ts (new)
│   ├── EmptyState/
│   │   ├── EmptyState.tsx (new)
│   │   └── index.ts (new)
│   ├── FloatingActionButton/
│   │   ├── FloatingActionButton.tsx (new)
│   │   └── index.ts (new)
│   └── index.ts (updated)
├── screens/
│   ├── RecipeListScreen/
│   │   ├── RecipeListScreen.tsx (new)
│   │   └── index.ts (new)
│   └── index.ts (updated)
├── hooks/
│   ├── useRecipes.ts (new)
│   ├── useDebounce.ts (new)
│   └── index.ts (updated)
├── types/
│   ├── recipe.ts (new - if not using existing)
│   └── index.ts (updated)
```

### 🧪 Testing Requirements

- [ ] **Component Tests**
  - RecipeCard rendering with different data
  - SearchBar input and clear functionality
  - CategoryFilter selection behavior
  - EmptyState different scenarios
  - FAB navigation action

- [ ] **Integration Tests**
  - Recipe list loading and display
  - Search functionality end-to-end
  - Category filtering with search
  - Pull-to-refresh behavior
  - Infinite scroll pagination

- [ ] **Performance Tests**
  - FlatList scrolling performance (≥60fps)
  - Memory usage with large recipe lists
  - Image loading and caching efficiency
  - Search debouncing effectiveness

- [ ] **Accessibility Tests**
  - Screen reader compatibility
  - Touch target sizes (≥44px)
  - Focus management and navigation
  - Color contrast ratios (AA compliance)

### 🎯 Acceptance Criteria

**Given** a user opens the recipe list screen  
**When** recipes are loaded  
**Then** display recipe cards with image, title, and category

**Given** a user types in the search bar  
**When** they enter a search query  
**Then** filter recipes by title, description, and ingredients with debounced search

**Given** a user selects a category filter  
**When** they tap a category chip  
**Then** show only recipes from that category with visual selection indicator

**Given** a user pulls down on the recipe list  
**When** they release the pull gesture  
**Then** refresh the recipe data and show updated results

**Given** a user scrolls to the bottom of the recipe list  
**When** more recipes are available  
**Then** automatically load and display additional recipes

**Given** a user taps the floating action button  
**When** they want to add a new recipe  
**Then** navigate to the recipe creation screen

**Given** a user taps on a recipe card  
**When** they want to view recipe details  
**Then** navigate to the recipe detail screen with the selected recipe

**Given** a user has no recipes or search returns no results  
**When** the list is empty  
**Then** show appropriate empty state with helpful messaging

**Given** a user is in anonymous mode  
**When** they use the recipe list  
**Then** all features work with mock data and demo banner is visible

**Given** a user experiences a network error  
**When** recipes fail to load  
**Then** show error state with retry option

---

## 🚀 Implementation Priority

1. **Phase 1**: Core recipe list with RecipeCard and basic data loading
2. **Phase 2**: Search functionality with debounced input
3. **Phase 3**: Category filtering and combined search/filter
4. **Phase 4**: Pull-to-refresh and infinite scroll implementation
5. **Phase 5**: FAB navigation, performance optimization, and accessibility

---

## 📊 Performance Targets

- **List Scrolling**: Maintain 60fps during scroll
- **Search Response**: Results appear within 300ms of typing stop
- **Image Loading**: Progressive loading with placeholders
- **Memory Usage**: Efficient for 1000+ recipes
- **Network Efficiency**: Minimal API calls with smart caching

---

## 🔗 Related Components

- **Existing**: Button, TextInput, ErrorMessage, SuccessMessage
- **Navigation**: Recipe Detail Screen (future), Recipe Form Screen (future)
- **Services**: apiService, mockApiService
- **Theme**: Existing orange dark theme colors and typography

---

**Dependencies**: Anonymous Mode Implementation (3.2_00_anonymous.md)  
**Estimated Effort**: 8-12 hours  
**Status**: ✅ Completed   
**Assignee**: Claude Code  
**Created**: 2025-08-17